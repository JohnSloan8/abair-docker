import{a as s,j as e,V as l,a9 as p}from"./setPrototypeOf.fd4aa278.js";import{aa as j,u as k,c as q,ab as E,H,A as h,C as g,G as c,ac as f,ad as u,s as P,ae as x,g as G}from"./App.a6d338d9.js";import{M as I}from"./Meta.a904fca4.js";import"./index.07c19c52.js";import"./index.module.01fcbc19.js";const L=j(),o=L;function U(){const{t:a}=k(),[v,i]=s.exports.useState(!1),[w]=s.exports.useState(!1),[r,y]=s.exports.useState(!1),[d,A]=s.exports.useState(""),[m,$]=s.exports.useState(""),[B,W]=s.exports.useState(""),S=q(),[n]=E(),b=()=>{y(!r)},F=async t=>{if(t.preventDefault(),r){i(!0);const{data:T,error:C}=await P.auth.signUp({email:d,password:m});i(!1),C?console.log(C):(console.log(T.user),y(!1),n.get("origin")?window.location.href=`${x}${n.get("origin")}`:S(`${x}profile`,{replace:!0}))}else i(!0),P.auth.signInWithPassword({email:d,password:m}).then(()=>{i(!1),n.get("origin")?window.location.href=`${x}${n.get("origin")}`:S(`${G}profile`,{replace:!0})})};return e(H,{children:l(o,{sx:{maxWidth:"sm",width:"100%"},children:[e(I,{title:a("pageTitles.loginSignup")}),w?e(o,{py:{sm:4,xs:2},children:e(h,{title:"Confirmation Email sent",description:"Please check your email to confirm your accout. Then you can login to Abair."})}):r?e(o,{py:{sm:4,xs:2},children:e(h,{title:a("pages.auth.signup")})}):e(o,{py:{sm:4,xs:2},children:e(h,{title:a("pages.auth.login")})}),e(g,{m:2,children:v?"Processing...":w?e(p,{}):e(o,{component:"form",noValidate:!0,onSubmit:t=>{F(t)},sx:{mt:3},children:l(c,{container:!0,spacing:0,children:[e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,id:"email",label:a("pages.auth.emailAddress"),name:"email",autoComplete:"email",type:"email",placeholder:a("pages.auth.emailAddress"),value:d,onChange:t=>A(t.target.value)})}),e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,name:"password",label:a("pages.auth.password"),type:"password",id:"password",autoComplete:"new-password",value:m,onChange:t=>$(t.target.value)})}),r?l(p,{children:[e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,name:"confirm password",label:a("pages.auth.confirmPassword"),type:"password",id:"password",autoComplete:"new-password",value:B,onChange:t=>W(t.target.value)})}),e(g,{sx:{width:"100%"},children:e(u,{type:"submit",variant:"contained",sx:{mt:3,mb:2},children:a("pages.auth.signup")})}),e(u,{sx:{color:"secondary.main"},onClick:b,children:a("pages.auth.haveAccount")})]}):l(p,{children:[e(g,{sx:{width:"100%"},children:e(u,{type:"submit",variant:"contained",sx:{mt:3,mb:2},children:a("pages.auth.login")})}),e(u,{sx:{color:"secondary.main"},onClick:b,children:a("pages.auth.createAccount")})]})]})})})]})})}export{U as default};
