import{R as g,a4 as w,d,aa as S,a as T,j as i,V as F}from"./setPrototypeOf.fd4aa278.js";import{s as u,a as B,u as R,H as j,B as l,C as p,A as z,a4 as H,a5 as I,a6 as W}from"./App.8382d282.js";import{M as v}from"./Meta.fa41752c.js";import{a as E}from"./index.3ddf7c07.js";import"./index.943ca6f3.js";import"./index.module.01fcbc19.js";const M=async()=>{try{const{data:e,error:a}=await u.from("applications").select("name, url, category, description_en, description_ga, image");if(a)throw a;if(e)return e}catch(e){alert(e.message)}},L=async()=>{try{const{data:e,error:a}=await u.from("application_categories").select("id, name_en, name_ga");if(a)throw a;if(e)return e}catch(e){alert(e.message)}},f=g({key:"applications",default:[]}),q=()=>{const[e,a]=d(f);return{applications:e,setApplications:a}},D=g({key:"categories",default:[]}),G=()=>{const[e,a]=d(D);return{categories:e,setCategories:a}},h=g({key:"application-category-filter",default:1}),J=()=>{const[e,a]=d(h);return{applicationCategoryFilter:e,setApplicationCategoryFilter:a}},K=w({key:"filtered-application",get:({get:e})=>{const a=e(f),c=e(h),r=(n=>n.filter(o=>o.category===c))(a).sort((n,o)=>(console.log("a.category:",n.category),console.log("b.category:",o.category),n.url>o.url?-1:n.url<o.url?1:0));return console.log("filteredApplications:",r),r}});function X(){const{t:e,i18n:a}=B(),{appTabs:c,setAppTabs:m}=E(),{applications:r,setApplications:n}=q(),{categories:o,setCategories:y}=G(),x=S(K),{setApplicationCategoryFilter:C}=J(),{breakpointSize:A}=R(),_=(t,s)=>{const k=o[s].id;C(k),m(s)};T.exports.useEffect(()=>{console.log("in useEffect on Applications"),r.length===0&&M().then(t=>{console.log("res:",t),n(t)}),o.length===0&&L().then(t=>{y(t)})},[]);const b=t=>{window.location.replace(t)};return i(j,{pb:8,children:F(l,{sx:{width:"100%",maxWidth:"md"},children:[i(v,{title:e("pageTitles.applications")}),i(p,{children:i(l,{sx:{maxWidth:"md",width:"100%"},py:{sm:4,xs:2},children:i(z,{title:e("pageTitles.applications")})})}),i(p,{children:o?i(H,{value:c,onChange:_,"aria-label":"disabled tabs example",children:o.map((t,s)=>i(I,{label:a.language==="en"?t.name_en:t.name_ga},s))}):null}),i(p,{mt:2,children:i(l,{sx:{maxWidth:"md",width:"100%"},children:x.map((t,s)=>i(W,{onClick:()=>b(t.url),name:t.name,description:a.language==="en"?t.description_en:t.description_ga,image:t.image,message:t.url==="#"?e("pages.applications.comingSoon"):"",breakpointSize:A},s))})})]})})}export{X as default};
