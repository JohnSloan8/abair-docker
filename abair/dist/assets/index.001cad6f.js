import{a as s,j as e,V as l,a9 as m}from"./setPrototypeOf.fd4aa278.js";import{aa as L,a as R,b as j,ab as q,H as E,A as h,C as g,G as c,ac as f,ad as u,s as C,ae as v,r as P}from"./App.8382d282.js";import{M as H}from"./Meta.fa41752c.js";import"./index.943ca6f3.js";import"./index.module.01fcbc19.js";const U=L(),o=U;function D(){const{t:a}=R(),[A,r]=s.exports.useState(!1),[x]=s.exports.useState(!1),[i,w]=s.exports.useState(!1),[d,B]=s.exports.useState(""),[p,$]=s.exports.useState(""),[T,W]=s.exports.useState(""),y=j(),[n]=q(),S=()=>{w(!i)},k=async t=>{if(t.preventDefault(),i){r(!0);const{data:F,error:b}=await C.auth.signUp({email:d,password:p});r(!1),b?console.log(b):(console.log(F.user),w(!1),n.get("origin")?window.location.href=`${v}${n.get("origin")}`:y(`${P}profile`,{replace:!0}))}else r(!0),C.auth.signInWithPassword({email:d,password:p}).then(()=>{r(!1),n.get("origin")?window.location.href=`${v}${n.get("origin")}`:y(`${P}profile`,{replace:!0})})};return e(E,{children:l(o,{sx:{maxWidth:"sm",width:"100%"},children:[e(H,{title:a("pageTitles.loginSignup")}),x?e(o,{py:{sm:4,xs:2},children:e(h,{title:"Confirmation Email sent",description:"Please check your email to confirm your accout. Then you can login to Abair."})}):i?e(o,{py:{sm:4,xs:2},children:e(h,{title:a("pages.auth.signup")})}):e(o,{py:{sm:4,xs:2},children:e(h,{title:a("pages.auth.login")})}),e(g,{m:2,children:A?"Processing...":x?e(m,{}):e(o,{component:"form",noValidate:!0,onSubmit:t=>{k(t)},sx:{mt:3},children:l(c,{container:!0,spacing:0,children:[e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,id:"email",label:a("pages.auth.emailAddress"),name:"email",autoComplete:"email",type:"email",placeholder:a("pages.auth.emailAddress"),value:d,onChange:t=>B(t.target.value)})}),e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,name:"password",label:a("pages.auth.password"),type:"password",id:"password",autoComplete:"new-password",value:p,onChange:t=>$(t.target.value)})}),i?l(m,{children:[e(c,{item:!0,xs:12,my:1,children:e(f,{required:!0,fullWidth:!0,name:"confirm password",label:a("pages.auth.confirmPassword"),type:"password",id:"password",autoComplete:"new-password",value:T,onChange:t=>W(t.target.value)})}),e(g,{sx:{width:"100%"},children:e(u,{type:"submit",variant:"contained",sx:{mt:3,mb:2},children:a("pages.auth.signup")})}),e(u,{sx:{color:"secondary.main"},onClick:S,children:a("pages.auth.haveAccount")})]}):l(m,{children:[e(g,{sx:{width:"100%"},children:e(u,{type:"submit",variant:"contained",sx:{mt:3,mb:2},children:a("pages.auth.login")})}),e(u,{sx:{color:"secondary.main"},onClick:S,children:a("pages.auth.createAccount")})]})]})})})]})})}export{D as default};
