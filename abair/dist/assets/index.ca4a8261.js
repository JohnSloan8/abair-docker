import{R as g,a4 as w,d,aa as S,a as T,j as i,V as B}from"./setPrototypeOf.08e812d4.js";import{s as f,a as F,u as R,H as E,B as c,C as p,A as M,a4 as j,a5 as z,a6 as H}from"./App.6804aaaa.js";import{M as I}from"./Meta.9ff6162c.js";import{a as W}from"./index.2c384a49.js";import"./index.2287d8ab.js";import"./index.module.26d9abbc.js";const v=async()=>{try{const{data:e,error:a}=await f.from("applications").select("name, url, category, description_en, description_ga, image");if(a)throw a;if(e)return e}catch(e){alert(e.message)}},D=async()=>{try{const{data:e,error:a}=await f.from("application_categories").select("id, name_en, name_ga");if(a)throw a;if(e)return e}catch(e){alert(e.message)}},h=g({key:"applications",default:[]}),L=()=>{const[e,a]=d(h);return{applications:e,setApplications:a}},q=g({key:"categories",default:[]}),G=()=>{const[e,a]=d(q);return{categories:e,setCategories:a}},y=g({key:"application-category-filter",default:1}),J=()=>{const[e,a]=d(y);return{applicationCategoryFilter:e,setApplicationCategoryFilter:a}},K=w({key:"filtered-application",get:({get:e})=>{const a=e(h),l=e(y),r=(n=>n.filter(o=>o.category===l))(a).sort((n,o)=>(console.log("a.category:",n.category),console.log("b.category:",o.category),n.url>o.url?-1:n.url<o.url?1:0));return console.log("filteredApplications:",r),r}});function X(){const{t:e,i18n:a}=F(),{appTabs:l,setAppTabs:m}=W(),{applications:r,setApplications:n}=L(),{categories:o,setCategories:x}=G(),A=S(K),{setApplicationCategoryFilter:C}=J(),{breakpointSize:_}=R(),b=(t,s)=>{const k=o[s].id;C(k),m(s)};T.exports.useEffect(()=>{console.log("in useEffect on Applications"),r.length===0&&v().then(t=>{console.log("res:",t),n(t)}),o.length===0&&D().then(t=>{x(t)})},[]);const u=t=>{window.location.replace(t)};return i(E,{pb:8,children:B(c,{sx:{width:"100%",maxWidth:"md"},children:[i(I,{title:e("pageTitles.applications")}),i(p,{children:i(c,{sx:{maxWidth:"md",width:"100%"},py:{sm:4,xs:2},children:i(M,{title:e("pageTitles.applications")})})}),i(p,{children:o?i(j,{value:l,onChange:b,"aria-label":"disabled tabs example",children:o.map((t,s)=>i(z,{label:a.language==="en"?t.name_en:t.name_ga},s))}):null}),i(p,{mt:2,children:i(c,{sx:{maxWidth:"md",width:"100%"},children:A.map((t,s)=>i(H,{onClick:()=>t.name==="An Bat M\xEDrialta"?u("/applications/bat-mirialta"):u(t.url),name:t.name,description:a.language==="en"?t.description_en:t.description_ga,image:t.image,message:t.url==="#"&&t.name!=="An Bat M\xEDrialta"?e("pages.applications.comingSoon"):"",breakpointSize:_},s))})})]})})}export{X as default};
