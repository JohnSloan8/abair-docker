import{W as S,L as u,j as t,a as p}from"./setPrototypeOf.d3c81777.js";import{u as w,a as v,b as A,c as F,R as P,m as B}from"./usePopulateVerbsTensesForms.748993f3.js";import{u as W,a as j,b as q,M as T}from"./index.248965ed.js";import{u as k,a as b,b as f,B as n,A as g,F as _,T as z,C as i}from"./App.84a71fde.js";import{C as H}from"./ChatHistories.05372bda.js";import{b as C,d as $}from"./index.ed3f81da.js";import{u as x,a as R,B as r}from"./index.a0218f12.js";import{p as V,g as E,c as L,P as M,C as N}from"./calculateChatPointsCumFreq.c75649a2.js";import"./index.module.22f9f75f.js";import"./TotalPoints.f998e4b4.js";const O=()=>{const e=k(),{session:l}=b(),{chats:a,setChats:c}=x(),s=S(R),{setAdjacencyPairs:o}=W(),{t:h}=f(),d=m=>{m?e(`${C}chat`):(l!==null&&s!==void 0&&(console.log("finishing previously unfinished chat"),V(s.id,null,!0,null).then(y=>{o([]),c([...a.slice(0,a.length-1),y])})),e(`${C}set-task`))};return u(r,{children:[t(n,{children:s&&t(r,{button:!0,width:"100%",children:t(g,{size:"large",fullWidth:!0,label:h("buttons.continue"),onClick:()=>{d(!0)},selected:!0,color:"secondary"})})}),t(n,{mt:s?1:0,children:t(r,{button:!0,width:"100%",children:t(g,{size:"large",fullWidth:!0,label:h("buttons.start"),onClick:()=>{d(!1)},selected:!0,color:"secondary"})})})]})},G=()=>{const{t:e}=f();return t(r,{children:t(n,{children:t(r,{button:!0,width:"100%",children:t(g,{size:"large",fullWidth:!0,label:e("buttons.loginSignup"),onClick:()=>{window.location.href=`${$}/login?origin=applications/bat-mirialta`},selected:!0,color:"secondary"})})})})},I=()=>{const{session:e}=b(),[l,a]=p.exports.useState([]),{t:c}=f();return p.exports.useEffect(()=>{e&&E(e.user.id).then(s=>{if(s){const o=L(s);a(Object.values(o))}})},[e]),t(r,{children:u(_,{children:[t(z,{align:"center",variant:"h6",children:c("headers.stats")}),t(M,{}),t(n,{width:"100%",height:200,sx:{position:"relative"},children:t(n,{width:"93%",height:"100%",sx:{position:"absolute",left:-10},children:t(N,{cumFreq:l})})})]})})},D=()=>{const{t:e}=f();w(),v(),A();const[l,a]=p.exports.useState(!1),{verbs:c}=j(),{chats:s}=x(),{session:o}=b(),h=F(),d=q();return p.exports.useEffect(()=>{c.length===0&&h(),s.length===0&&o!==null&&d(o.user.id),s.filter(m=>m.complete&&m.points!==null).length>0&&(console.log("chats:",s),a(!0))},[o]),u(n,{py:2,children:[t(T,{title:"Welcome"}),t(i,{children:t(P,{})}),t(i,{py:1,px:3,minHeight:70,children:t(B,{sequence:[1e3,String(e("instructions.welcome.text_01")),200,String(e("instructions.welcome.text_02")),500,String(e("instructions.welcome.text_03"))],wrapper:"span",cursor:!0,repeat:0})}),o?u(n,{children:[t(i,{mt:1,children:t(O,{})}),l?u(n,{children:[t(i,{mt:2,children:t(I,{})}),t(i,{mt:2,children:t(H,{})})]}):null]}):t(i,{mt:1,children:t(G,{})})]})},ot=D;export{ot as default};
