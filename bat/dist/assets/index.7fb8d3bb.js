import{L as b,j as t,X as y,a as S}from"./setPrototypeOf.96237ccd.js";import{u as Z,a as ee,b as ae,c as se,R as te,m as F}from"./usePopulateVerbsTensesForms.e734b317.js";import{u as ne,M as ie}from"./robot.3f15a04a.js";import{s as V,_ as re,g as w,e as I,h as T,i as A,ar as P,as as R,f as Q,j as oe,k as le,at as ce,au as ue,av as he,aw as de,b as _,O as me,Q as be,u as ge,a as j,d as pe,W as fe,H as xe,S as ve,P as Ee,ax as ye,B as u,T as k,A as ke,C}from"./App.2d5da869.js";import{b as Ce}from"./index.c0ea559d.js";import{c as De,S as Se}from"./usePushRandomResponse.4b6b3773.js";import{B as q}from"./BatBox.574d93c0.js";import"./index.module.99d47a0b.js";import"./translationGA.3f3dca7f.js";const we=async(i,a,r,e,s,o)=>{console.log("userID:",i);try{const{data:c,error:n}=await V.from("bat_chats").insert({user_id:i,verb:a,tense:r,form:e,questions:s,intro:o}).select("*").single();if(n)throw n;if(c)return c}catch(c){alert(c.message)}},Ie=async(i,a,r)=>{try{const{data:e,error:s}=await V.from("bat_questions").select("id").in("verb_id",i).in("tense_id",a).in("form_id",r);if(s)throw s;return e}catch(e){alert(e.message)}},Te=()=>{const{profile:i}=re(),{selectedVerb:a}=w(),{t:r}=I(),{selectedTense:e}=T(),{selectedForm:s}=A(),o=De();return()=>{let n=o([],"filler","intro","greeting","naive",{name:i!==null&&i.username!==null?i.username:"there"});return n=o(n,"filler","intro","taskDescription","basic",{verb:a!==void 0?a.name:r("task.allVerbs"),tense:e!==void 0?e.name:r("task.allTenses"),form:s!==void 0?s.name:r("task.allForms")}),n=o(n,"filler","intro","questionDescription","basic",{}),n=o(n,"filler","intro","hintDescription","basic",{}),n=o(n,"filler","intro","getReady","basic",{}),n}},Ae={abair:"speak",beir:"bring",clois:"hear",faigh:"get",feic:"see",ith:"eat",tabhair:"give",tar:"come",b\u00ED:"be",t\u00E9igh:"go",d\u00E9an:"do/make","aimsir chaite":"past tense","aimsir l\xE1ithreach":"present tense","aimsir fh\xE1istineach":"future tense","modh coinn\xEDollach":"conditional tense","briathar saor":"free verb",ceisteach:"question",coibhneasta:"relative clause",ceisteanna:"questions","ceisteanna breise":"additional questions",sple\u00E1ch:"dependent clause",di\u00FAltach:"negative"},D=({label:i,value:a,handleChange:r,items:e,all:s=!0,allDisplay:o="",lang:c="ga"})=>b(Se,{label:i,value:a,onChange:r,sx:{width:"100%",color:"#fff",textAlign:"center"},children:[s&&t(P,{value:"all",children:o},"all"),e.map((n,g)=>t(P,{value:n,children:c==="ga"?n:n+` (${Ae[n]})`},g))]});function Fe(){const{selectedVerb:i}=w(),{selectedTense:a}=T(),{selectedForm:r}=A(),{setQuestionSet:e}=R(),{verbs:s}=Q(),{tenses:o}=oe(),{forms:c}=le();return()=>{const g=i!==void 0?[i.id]:s.map(h=>h.id),x=a!==void 0?[a.id]:o.map(h=>h.id),p=r!==void 0?[r.id]:c.map(h=>h.id);Ie(g,x,p).then(h=>{h!==void 0?e(h.map(f=>f.id)):console.log("question set undefined")})}}const Pe=(i,a)=>{const r=new Array(a);let e=i.length;const s=new Array(e);for(a>e&&(a=e);a--;){const o=Math.floor(Math.random()*e);r[a]=i[o in s?s[o]:o],s[o]=--e in s?s[e]:e}return r},qe=()=>{const i=y(ce),{selectedVerb:a,setSelectedVerb:r}=w(),e=y(ue),{selectedTense:s,setSelectedTense:o}=T(),c=y(he),{selectedForm:n,setSelectedForm:g}=A(),{noQuestions:x}=de(),{questionSet:p}=R(),[h,f]=S.exports.useState(!1),{chats:B,setChats:M}=_(),{setIntro:O}=me(),{setOutro:H}=be(),W=ge(),{session:v}=j(),$=Fe(),G=Te(),{setAdjacencyPairs:N}=pe(),{setAnimatingOutro:z}=fe(),L=()=>{v!==null&&(f(!0),$())},{setMessageInputDisabled:X}=xe(),{t:d,i18n:E}=I(),{setShowAvailablePoints:J}=ve(),{setShowPoints:K}=Ee(),{setShowHome:U}=ye();return S.exports.useEffect(()=>{if(p.length!==0&&v!==null&&h){f(!1),K(!1),U(!1),J(!0),O([]),H([]),N([]),X(!0),z(!1);const l=G(),m=Pe(p,x);we(v.user.id,a!==void 0?a.name:null,s!==void 0?s.name:null,n!==void 0?n.name:null,m,l).then(Y=>{M([...B,Y]),W(`${Ce}chat`)})}console.log("availableVerbs:",i)},[p]),b(q,{children:[b(u,{children:[t(k,{align:"center",variant:"h6",children:d("headers.verb")}),t(u,{border:2,borderColor:"primary.dark",borderRadius:1.5,children:t(D,{handleChange:l=>{r(i.find(m=>m.name===l.target.value))},value:a!==void 0?a.name:"all",label:"Verbs",items:i.map(l=>l.name).sort(),allDisplay:d("task.allVerbs"),lang:E.language})})]}),b(u,{mt:1,children:[t(k,{align:"center",variant:"h6",children:d("headers.tense")}),t(u,{border:2,borderColor:"primary.dark",borderRadius:1.5,children:t(D,{handleChange:l=>{o(e.find(m=>m.name===l.target.value))},value:s!==void 0?s.name:"all",label:"Tenses",items:e.map(l=>l.name).sort(),allDisplay:d("task.allTenses"),lang:E.language})})]}),b(u,{mt:1,children:[t(k,{align:"center",variant:"h6",children:d("headers.form")}),t(u,{border:2,borderColor:"primary.dark",borderRadius:1.5,children:t(D,{handleChange:l=>{g(c.find(m=>m.name===l.target.value))},value:n!==void 0?n.name:"all",label:"Forms",items:c.map(l=>l.name).sort(),allDisplay:d("task.allForms"),lang:E.language})})]}),t(u,{mt:3,children:t(q,{button:!0,width:"100%",children:t(ke,{size:"large",fullWidth:!0,label:d("buttons.start"),onClick:()=>{L()},selected:!0,color:"secondary"})})})]})},Ve=()=>{Z(),ee(),ae();const{verbs:i}=Q(),{chats:a}=_(),{session:r}=j(),e=se(),s=ne(),{i18n:o}=I();return S.exports.useEffect(()=>{i.length===0&&e(),a.length===0&&r!==null&&s(r.user.id)},[r]),b(u,{pb:2,children:[t(ie,{title:"SetTask"}),t(C,{pt:2,children:t(te,{})}),t(C,{py:1,px:2,flexDirection:"column",children:b(u,{width:"95%",height:150,maxWidth:400,children:[t(u,{width:"100%",height:"100%",sx:{display:o.language==="ga"?"block":"none"},children:t(F,{style:{height:150,width:"100%"},sequence:[1e3,"Pioc briathar, ",200,"Pioc briathar, aimsir,",200,`Pioc briathar, aimsir, agus foirm.
`,500,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le`,200,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED'`,200,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.`,500,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.
Is f\xE9idir liom cabhr\xFA leat tr\xED nodanna agus molta\xED a thabhairt duit.`,500,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.
Is f\xE9idir liom cabhr\xFA leat tr\xED nodanna agus molta\xED a thabhairt duit.
T\xE1 10 bpointe ag dul ar gach ceist.`,400,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.
Is f\xE9idir liom cabhr\xFA leat tr\xED nodanna agus molta\xED a thabhairt duit.
T\xE1 10 bpointe ag dul ar gach ceist..`,400,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.
Is f\xE9idir liom cabhr\xFA leat tr\xED nodanna agus molta\xED a thabhairt duit.
T\xE1 10 bpointe ag dul ar gach ceist...`,500,`Pioc briathar, aimsir, agus foirm.
Cuirfidh m\xE9 5 gceist ort le 'l\xEDon na bearna\xED' iontu.
Is f\xE9idir liom cabhr\xFA leat tr\xED nodanna agus molta\xED a thabhairt duit.
T\xE1 10 bpointe ag dul ar gach ceist...
An bhfuil t\xFA in ann 50 a shroichint? `],wrapper:"span",cursor:!0,repeat:0})}),t(u,{width:"100%",height:"100%",sx:{display:o.language==="en"?"block":"none"},children:t(F,{style:{height:170,width:"100%"},sequence:[1e3,"Choose a verb, ",200,"Choose a verb, tense,",200,`Choose a verb, tense, and form to practice.
`,500,`Choose a verb, tense, and form to practice.
I will ask you 5`,200,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank'`,200,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.`,500,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.
I can help by giving hints and suggestions.`,500,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.
I can help by giving hints and suggestions.
There are 10 points per question.`,400,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.
I can help by giving hints and suggestions.
There are 10 points per question..`,400,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.
I can help by giving hints and suggestions.
There are 10 points per question...`,500,`Choose a verb, tense, and form to practice.
I will ask you 5 'fill in the blank' questions.
I can help by giving hints and suggestions.
There are 10 points per question...
Can you score 50?`],wrapper:"span",cursor:!0,repeat:0})})]})}),t(C,{children:t(qe,{})})]})},$e=Ve;export{$e as default};
