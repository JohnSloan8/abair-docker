import{m as y,B as I}from"./App.dae1d44a.js";import{W as A}from"./index.module.a0666f78.js";import{a as d,t as C}from"./index.5e66980a.js";import{j as h,R as s,F as r,d as a}from"./createTheme.3b532d00.js";const j=async t=>{try{const{data:e,error:o}=await y.from("bat_chats").select("*").eq("user_id",t).order("id",{ascending:!0});if(o)console.log("error:",o);else return e}catch(e){alert(e.message)}},tt=async(t,e,o)=>{console.log("patching chat");try{const{data:n,error:i}=await y.from("bat_chats").update({id:t,outro:e,complete:o}).select().single();if(i)throw i;if(n)return n}catch(n){alert(n.message)}};function et({description:t=d.description,meta:e=[],title:o,image:n=d.image}){const i=`${C}${o?" | "+o:""}`;return h(A,{title:i,meta:[{name:"description",content:t},{property:"og:title",content:i},{property:"og:description",content:t},{property:"og:type",content:"website"},{property:"og:image",content:n},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:i},{name:"twitter:description",content:t}].concat(e)})}const st=({children:t,width:e="90%",button:o=!1,height:n="100%"})=>h(I,{sx:{backgroundColor:"#67add6"},width:e,height:n,border:4,borderRadius:3,borderColor:"#3e435a",p:o?0:2,maxWidth:400,children:t}),f=s({key:"adjacency-pairs-state",default:[]}),at=()=>{const[t,e]=a(f);return{adjacencyPairs:t,setAdjacencyPairs:e}},D=r({key:"current-adjacency-pair",get:({get:t})=>{const e=t(f);if(e.length>0)return e.reduce((o,n)=>o.id>n.id?o:n)}}),x=s({key:"awaiting-hint-state",default:!1}),nt=()=>{const[t,e]=a(x);return{awaitingHint:t,setAwaitingHint:e}},q=s({key:"received-adjacency-pair-history-state",default:!1}),ot=()=>{const[t,e]=a(q);return{receivedAdjacencyPairHistory:t,setReceivedAdjacencyPairHistory:e}},b=s({key:"chats",default:[]}),Q=()=>{const[t,e]=a(b);return{chats:t,setChats:e}},p=r({key:"chat-in-progress",get:({get:t})=>{const e=t(b);if(e.length>0&&!e[e.length-1].complete)return e[e.length-1]}}),F=s({key:"intro",default:[]}),it=()=>{const[t,e]=a(F);return{intro:t,setIntro:e}},H=s({key:"outro",default:[]}),rt=()=>{const[t,e]=a(H);return{outro:t,setOutro:e}},V=s({key:"chat-text-state",default:""}),ct=()=>{const[t,e]=a(V);return{chatText:t,setChatText:e}},R=s({key:"bat-typing-state",default:!1}),lt=()=>{const[t,e]=a(R);return{batTyping:t,setBatTyping:e}},_=s({key:"message-input-disabled-state",default:!1}),ut=()=>{const[t,e]=a(_);return{messageInputDisabled:t,setMessageInputDisabled:e}},B=s({key:"ta-nil-input-choice-state",default:!1}),dt=()=>{const[t,e]=a(B);return{taNilInputChoice:t,setTaNilInputChoice:e}},N=s({key:"total-points",default:0}),yt=()=>{const[t,e]=a(N);return{totalPoints:t,setTotalPoints:e}},v=s({key:"available-points",default:0}),ht=()=>{const[t,e]=a(v);return{availablePoints:t,setAvailablePoints:e}},M=s({key:"show-available-points",default:!0}),ft=()=>{const[t,e]=a(M);return{showAvailablePoints:t,setShowAvailablePoints:e}},O=s({key:"this-penalty",default:0}),bt=()=>{const[t,e]=a(O);return{thisPenalty:t,setThisPenalty:e}},W=s({key:"show-this-penalty",default:!1}),pt=()=>{const[t,e]=a(W);return{showThisPenalty:t,setShowThisPenalty:e}},z=s({key:"show-points",default:!1}),vt=()=>{const[t,e]=a(z);return{showPoints:t,setShowPoints:e}},mt=r({key:"show-hint-state",get:({get:t})=>t(v)>1}),E=s({key:"show-home",default:!1}),St=()=>{const[t,e]=a(E);return{showHome:t,setShowHome:e}},G=s({key:"completed-questions",default:0}),gt=()=>{const[t,e]=a(G);return{completedQuestions:t,setCompletedQuestions:e}},m=s({key:"questions-state",default:[]}),kt=()=>{const[t,e]=a(m);return{questions:t,setQuestions:e}},J=s({key:"question-set-state",default:[]}),Pt=()=>{const[t,e]=a(J);return{questionSet:t,setQuestionSet:e}},K=r({key:"current-question-index-state",get:({get:t})=>{const e=t(p),o=t(D);if(e!==void 0&&o!==void 0)return e.questions.indexOf(o.question_id)}}),wt=r({key:"current-question-state",get:({get:t})=>{const e=t(p),o=t(m),n=t(K);if(e!==void 0&&n!==void 0)return o.find(i=>i.id===e.questions[n])}}),L=s({key:"animating-responses",default:!1}),Tt=()=>{const[t,e]=a(L);return{animatingResponses:t,setAnimatingResponses:e}};function It(){const{setChats:t}=Q();return o=>{j(o).then(n=>{n!==void 0&&t(n)})}}const c=s({key:"verbs-state",default:[]}),At=()=>{const[t,e]=a(c);return{verbs:t,setVerbs:e}},S=s({key:"available-VerbIDs-state",default:[]}),Ct=()=>{const[t,e]=a(S);return{availableVerbIDs:t,setAvailableVerbIDs:e}},g=s({key:"selected-verb-state",default:void 0}),jt=()=>{const[t,e]=a(g);return{selectedVerb:t,setSelectedVerb:e}},Dt=r({key:"available-verbs",get:({get:t})=>{const e=t(S),n=t(c).filter(i=>e.includes(i.id));return n!==void 0?n:[]}}),l=s({key:"tenses-state",default:[]}),xt=()=>{const[t,e]=a(l);return{tenses:t,setTenses:e}},k=s({key:"available-tenseIDs-state",default:[]}),qt=()=>{const[t,e]=a(k);return{availableTenseIDs:t,setAvailableTenseIDs:e}},P=s({key:"selected-tense-state",default:void 0}),Qt=()=>{const[t,e]=a(P);return{selectedTense:t,setSelectedTense:e}},Ft=r({key:"available-tenses",get:({get:t})=>{const e=t(k),n=t(l).filter(i=>e.includes(i.id));return n!==void 0?n:[]}}),u=s({key:"forms-state",default:[]}),Ht=()=>{const[t,e]=a(u);return{forms:t,setForms:e}},w=s({key:"available-FormIDs-state",default:[]}),Vt=()=>{const[t,e]=a(w);return{availableFormIDs:t,setAvailableFormIDs:e}},T=s({key:"selected-form-state",default:void 0}),Rt=()=>{const[t,e]=a(T);return{selectedForm:t,setSelectedForm:e}},_t=r({key:"available-forms",get:({get:t})=>{const e=t(w),n=t(u).filter(i=>e.includes(i.id));return n!==void 0?n:[]}});s({key:"show-start-state",default:!1});r({key:"task-selected",get:({get:t})=>{const e=t(g),o=t(P),n=t(T);return e!==void 0&&o!==void 0&&n!==void 0}});r({key:"tasks-populated",get:({get:t})=>{const e=t(c),o=t(l),n=t(u);return e.length!==0&&o.length!==0&&n.length!==0}});const U=s({key:"no-questions-state",default:1}),Bt=()=>{const[t,e]=a(U);return{noQuestions:t,setNoQuestions:e}},Nt="/assets/images/robot.png";export{lt as A,st as B,D as C,nt as D,K as E,ht as F,Tt as G,wt as H,yt as I,bt as J,gt as K,pt as L,et as M,kt as N,mt as O,ct as P,f as Q,m as R,F as S,H as T,dt as U,ot as V,p as a,at as b,jt as c,Qt as d,Rt as e,At as f,xt as g,Ht as h,Bt as i,Pt as j,Dt as k,Ft as l,_t as m,it as n,rt as o,tt as p,ut as q,ft as r,vt as s,St as t,Q as u,Ct as v,qt as w,Vt as x,It as y,Nt as z};
